<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DX MESH - Live Feed</title>
<link rel="icon" type="image/png" href="/westmidshelpfullinks/ass/favicon-96x96.png">
<link rel="apple-touch-icon" href="/westmidshelpfullinks/ass/favicon-96x96.png">
<meta name="theme-color" content="#000000">

<style>
  body {
    background-color: black;
    color: #FFAA33;
    font-family: 'Courier New', monospace;
    text-align: center;
    margin: 0;
    padding: 20px;
  }
  h1 { margin: 20px 0; font-size: 2.5em; }
  h2 { margin: 10px 0; font-size: 1.5em; }
  h3 { margin: 5px 0; }

  .container {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
    margin: 10px 0;
  }

  .iframe-wrapper {
    text-align: center;
    margin: 15px 5px;
    border: 2px solid #FFAA33;
    border-radius: 8px;
    overflow: hidden;
    background-color: #331a00;
    box-shadow: 0 4px 8px rgba(255,170,51,0.5);
    width: 350px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
  }

  .iframe-wrapper p {
    margin: 5px 5px 0;
    font-weight: bold;
    font-size: 1.2em;
    text-align: center;
  }

  iframe {
    border: none;
    width: 100%;
    height: 300px;
  }

  .toggle-box {
    border: 2px solid #FFAA33;
    border-radius: 8px;
    padding: 20px;
    margin: 0 auto 10px auto;
    width: 95%;
    max-width: 1000px;
    background: linear-gradient(180deg, #331a00, #1a0d00);
    color: #FFAA33;
    box-shadow: 0 4px 8px rgba(255,170,51,0.5);
    text-align: left;
  }

  .hide-button,
  .reset-button {
    margin: 10px 0 15px 0;
    padding: 5px 10px;
    background-color: #ff0000;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-family: 'Courier New', monospace;
    font-size: 1em;
    box-shadow: 0 4px 8px rgba(255,0,0,0.5);
  }
  .hide-button:hover,
  .reset-button:hover { background-color: #cc0000; }

  /* === LIGHTROPE DECORATION === */
  .lightrope {
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    position: absolute;
    z-index: 20;
    margin: -15px 0 0 0;
    padding: 0;
    pointer-events: none;
    width: 100%;
  }
  .lightrope li {
    position: relative;
    list-style: none;
    margin: 20px;
    display: inline-block;
    width: 12px;
    height: 28px;
    border-radius: 50%;
    background: rgba(0,247,165,1);
    box-shadow: 0px 5px 24px 3px rgba(0,247,165,1);
    animation-fill-mode: both;
    animation-iteration-count: infinite;
    animation-name: flash-1;
    animation-duration: 2s;
  }
  .lightrope li:nth-child(2n+1) { background: rgba(0,255,255,1); box-shadow: 0px 5px 24px 3px rgba(0,255,255,0.5); animation-name: flash-2; animation-duration: 0.4s; }
  .lightrope li:nth-child(4n+2) { background: rgba(247,0,148,1); box-shadow: 0px 5px 24px 3px rgba(247,0,148,1); animation-name: flash-3; animation-duration: 1.1s; }
  .lightrope li:nth-child(odd) { animation-duration: 1.8s; }
  .lightrope li:nth-child(3n+1) { animation-duration: 1.4s; }
  .lightrope li::before { content: ""; position: absolute; background: #222; width: 10px; height: 9px; border-radius: 3px; top: -5px; left: 1px; }
  .lightrope li::after { content: ""; top: -14px; left: 9px; position: absolute; width: 52px; height: 18px; border-bottom: solid #222 2px; border-radius: 50%; }
  .lightrope li:last-child::after { content: none; }
  .lightrope li:first-child { margin-left: -20px; }
  @keyframes flash-1 { 0%,100%{background:rgba(0,247,165,1);box-shadow:0px 5px 24px 3px rgba(0,247,165,1);}50%{background:rgba(0,247,165,0.4);box-shadow:0px 5px 24px 3px rgba(0,247,165,0.2);} }
  @keyframes flash-2 { 0%,100%{background:rgba(0,255,255,1);box-shadow:0px 5px 24px 3px rgba(0,255,255,1);}50%{background:rgba(0,255,255,0.4);box-shadow:0px 5px 24px 3px rgba(0,255,255,0.2);} }
  @keyframes flash-3 { 0%,100%{background:rgba(247,0,148,1);box-shadow:0px 5px 24px 3px rgba(247,0,148,1);}50%{background:rgba(247,0,148,0.4);box-shadow:0px 5px 24px 3px rgba(247,0,148,0.2);} }
  header, main, footer { position: relative; z-index: 30; }

  /* === SNOW CANVAS === */
  #snow-canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 10;
  }

  /* Snow toggle button */
  #toggle-snow {
    margin-top: 10px;
    background-color:#ff0000;
    color:white;
    border:none;
    border-radius:5px;
    padding:5px 10px;
    box-shadow:0 4px 8px rgba(255,0,0,0.5);
    cursor:pointer;
  }
</style>
</head>
<body>

<!-- LIGHTROPE DECORATION -->
<ul class="lightrope">
  <li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li>
  <li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li>
  <li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li>
  <li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li>
</ul>

<h1>THE DX MEGA MESH</h1>
<h2>Liam Cottle ‚Äì Live Feed</h2>
<h3>Created by SubnetConflict.</h3>
<h3>Nicked by KD.</h3>

<div style="margin:20px auto; width:95%; max-width:1000px; text-align:center;">
  <div id="info-box" class="toggle-box">
    <h3 style="background-color:#B22222; color:orange; display:inline-block; padding:5px 10px; border-radius:5px;">
      ‚ö†Ô∏èPlease Consider Consulting Your Local Mesh Group And Fully Read The Meshtastic Role Guidance Before Selecting The Router Role ‚ö†Ô∏è
    </h3>
    <p><strong>Join the Mesh Hub Midlands Discord:</strong>
      <a href="https://discord.gg/98b377tCBC" target="_blank">https://discord.gg/98b377tCBC</a>
    </p>
    <p><strong>MeshHubMidlands Website:</strong>
      <a href="https://www.meshhubmids.com" target="_blank">www.meshhubmids.com</a>
    </p>
    <p>Settings to ensure visibility on nodes:</p>
    <ul><li><strong>OK to MQTT</strong> is ON</li></ul>
    <p>To have your own node, connect to Liam Cottle‚Äôs MQTT server https://meshtastic.liamcottle.net click the i icon OR connect to MHM's MQTT using these settings MHM still feeds liam cottles map</p>
    <ul>
      <li>Address: mqtt.meshhubmids.com</li>
      <li>Username: mhmuplink</li>
      <li>Password: mhmuplink</li>
      <li>Encryption: no</li>
      <li>JSON Output: yes</li>
      <li>TLS: No</li>
      <p>for both servers recommend these settings</p>
      <li><strong>Ignore MQTT</strong>: OFF</li>
      <li><strong>OK to MQTT</strong>: ON</li>
      <li><strong>Uplink</strong>: ON</li>
    </ul>
    <p>A node with Wi-Fi will be needed, or use Proxy-to-Client Enable. Fixed position recommended.</p>
    <p>I (KD) will add your node once it shows on Liam Cottle‚Äôs map. It may take a while ‚Äì sorry!</p>
  </div>

  <!-- Info toggle & colour picker -->
  <button id="info-toggle" class="hide-button">Hide Info</button>
  <div style="margin: 10px 0;">
    <label for="font-color" style="color:#FFAA33;">Choose Theme Colour: </label>
    <input type="color" id="font-color" name="font-color" value="#FFAA33">
  </div>
  <button id="reset-color" class="reset-button">Reset Colour</button>
  <button id="toggle-snow">Toggle Snow ‚ùÑÔ∏è</button>

  <p style="margin-top:15px;">
    <a href="https://willp618.github.io/westmidshelpfullinks" style="color:#FFAA33; text-decoration: underline; font-weight: bold;">üè† Home</a>
  </p>
  <p style="color:#FFAA33; margin-top:15px;"><em>Edited: 07/01/26  A NEW YEAR SAME OLD CRAP </em></p>
</div>

<div class="iframe-height-control" style="margin:20px 0;">
  <label for="iframe-height" style="color:#FFAA33;">Adjust Message Box Height: </label>
  <input type="range" id="iframe-height" min="100" max="500" value="300">
  <span id="iframe-height-value">300px</span>
</div>

<div class="container" id="iframe-container">
  <p style="color:#FFAA33;">Loading live nodes‚Ä¶</p>
</div>

<script>
fetch('../iframes.html')
  .then(res => res.text())
  .then(html => {
    document.getElementById('iframe-container').innerHTML = html;
    const currentColor = localStorage.getItem(localStorageKey) || '#FFAA33';
    applyColor(currentColor);
  })
  .catch(err => {
    console.error(err);
    document.getElementById('iframe-container').innerHTML =
      '<p style="color:red;">Failed to load node list.</p>';
  });

const infoBox = document.getElementById('info-box');
const infoToggleBtn = document.getElementById('info-toggle');
infoToggleBtn.addEventListener('click', () => {
  const show = infoBox.style.display === 'none';
  infoBox.style.display = show ? 'block' : 'none';
  infoToggleBtn.textContent = show ? 'Hide Info' : 'Show Info';
});

const localStorageKey = 'dx_color';
const savedColor = localStorage.getItem(localStorageKey);

function applyColor(chosenColor) {
  document.body.style.color = chosenColor;
  const darkenColor = (hex,f=0.2) => {
    let r=parseInt(hex.substr(1,2),16),
        g=parseInt(hex.substr(3,2),16),
        b=parseInt(hex.substr(5,2),16);
    return `rgb(${Math.floor(r*f)},${Math.floor(g*f)},${Math.floor(b*f)})`;
  };
  const darkerBg = darkenColor(chosenColor);
  document.querySelectorAll('.iframe-wrapper').forEach(w => {
    w.style.borderColor = chosenColor;
    w.style.boxShadow = `0 4px 8px ${chosenColor}80`;
    w.style.backgroundColor = darkerBg;
  });
  document.querySelectorAll('.toggle-box').forEach(box => {
    box.style.borderColor = chosenColor;
    box.style.boxShadow = `0 4px 8px ${chosenColor}80`;
    box.style.backgroundColor = darkerBg;
    box.style.color = chosenColor;
  });
  document.querySelectorAll('label[for="font-color"], label[for="iframe-height"], p[style*="Edited"]').forEach(el => {
    el.style.color = chosenColor;
  });
  document.getElementById('iframe-height-value').style.color = chosenColor;
}

if(savedColor) {
  applyColor(savedColor);
  const fontColorPicker = document.getElementById('font-color');
  if(fontColorPicker) fontColorPicker.value = savedColor;
}

const fontColorPicker = document.getElementById('font-color');
if (fontColorPicker) {
  fontColorPicker.addEventListener('input', function() {
    const chosenColor = fontColorPicker.value;
    applyColor(chosenColor);
    localStorage.setItem(localStorageKey, chosenColor);
  });
}

const resetButton = document.getElementById('reset-color');
if(resetButton) resetButton.addEventListener('click',()=>{
  const defaultColor = '#FFAA33';
  applyColor(defaultColor);
  if(fontColorPicker) fontColorPicker.value = defaultColor;
  localStorage.removeItem(localStorageKey);
});

const iframeHeightSlider = document.getElementById('iframe-height');
const iframeHeightValue = document.getElementById('iframe-height-value');
iframeHeightSlider.addEventListener('input', function () {
  const height = iframeHeightSlider.value;
  iframeHeightValue.textContent = height + 'px';
  document.querySelectorAll('iframe').forEach(iframe => {
    iframe.style.height = height + 'px';
  });
});

// === SNOW EFFECT ===
let snowActive = true, snowCanvas, ctx, snowflakes = [], animationFrameId = null;
const maxFlakesDesktop = 100, maxFlakesMobile = 50, frameInterval = 1000/30;
let lastFrameTime = 0;
function isMobile(){return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);}

// === CHRISTMAS MODE TOGGLE ===
const CHRISTMAS_MODE = false; // set false to hide lights, snow, and button

// Lights
const lightrope = document.querySelector('.lightrope');
if (!CHRISTMAS_MODE && lightrope) lightrope.style.display = 'none';

// Snow button
const snowButton = document.getElementById('toggle-snow');
if (!CHRISTMAS_MODE && snowButton) snowButton.style.display = 'none';

function initSnow(){
  if(!CHRISTMAS_MODE) return;
  if(snowCanvas) return;
  snowCanvas=document.createElement('canvas');
  snowCanvas.id='snow-canvas';
  document.body.appendChild(snowCanvas);
  ctx=snowCanvas.getContext('2d');
  resizeSnow();
  window.addEventListener('resize',resizeSnow);
  const maxFlakes=isMobile()?maxFlakesMobile:maxFlakesDesktop;
  for(let i=0;i<maxFlakes;i++){
    snowflakes.push({x:Math.random()*snowCanvas.width,y:Math.random()*snowCanvas.height,r:Math.random()*2+1,d:Math.random()*0.6+0.3,drift:Math.random()*1-0.5});
  }
  animateSnow();
}

function resizeSnow(){if(!snowCanvas)return;snowCanvas.width=window.innerWidth;snowCanvas.height=window.innerHeight;}

function animateSnow(timestamp){
  if(!snowActive) return;
  if(timestamp-lastFrameTime<frameInterval){animationFrameId=requestAnimationFrame(animateSnow);return;}
  lastFrameTime=timestamp;
  ctx.clearRect(0,0,snowCanvas.width,snowCanvas.height);
  ctx.fillStyle="rgba(255,255,255,0.85)";
  ctx.beginPath();
  for(const f of snowflakes){ctx.moveTo(f.x,f.y);ctx.arc(f.x,f.y,f.r,0,Math.PI*2,true);}
  ctx.fill();
  updateSnow();
  animationFrameId=requestAnimationFrame(animateSnow);
}

function updateSnow(){for(const f of snowflakes){f.y+=f.d;f.x+=f.drift*0.5;if(f.y>snowCanvas.height+5){f.y=-5;f.x=Math.random()*snowCanvas.width;}}}
function stopSnow(){if(animationFrameId) cancelAnimationFrame(animationFrameId); animationFrameId=null;}

if (CHRISTMAS_MODE) initSnow();

if(snowButton && CHRISTMAS_MODE) {
  snowButton.addEventListener('click',()=>{
    snowActive=!snowActive;
    if(snowActive){ if(!snowCanvas) initSnow(); snowCanvas.style.display='block'; animateSnow();}
    else if(snowCanvas){ snowCanvas.style.display='none'; stopSnow();}
  });
}
</script>
</body>
</html>
