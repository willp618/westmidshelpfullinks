<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DX MESH - Live Feed</title>
    <style>
        body {
            background-color: black;
            color: #66FF99; /* Matrix green */
            font-family: 'Courier New', monospace; /* Monospace font for a Matrix feel */
            text-align: center;
            margin: 0;
            padding: 20px;
            overflow: auto; /* Change this to allow scrolling */
        }

        h1 {
            margin: 20px 0;
            font-size: 2.5em;
        }

        h2 {
            margin: 10px 0;
            font-size: 1.5em;
        }

        .container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .iframe-wrapper {
            text-align: center;
            margin: 10px;
            border: 2px solid #66FF99;
            border-radius: 8px;
            overflow: hidden;
            background-color: #002200; /* Dark green background */
            box-shadow: 0 4px 8px rgba(0, 255, 0, 0.5);
            width: 350px; /* Uniform width for all boxes */
        }

        .iframe-wrapper p {
            margin: 10px 0;
            font-weight: bold;
            font-size: 1.1em;
        }

        iframe {
            border: none;
            width: 100%; /* Make iframe fill the container */
        }

        /* Matrix background effect */
        @keyframes rain {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        .matrix {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            display: none;
        }

        .matrix span {
            position: absolute;
            color: #00ff00;
            white-space: nowrap;
            font-size: 18px;
            animation: rain 0.5s linear infinite;
        }

        /* Style for the slider */
        .iframe-height-control {
            margin: 20px;
            font-size: 1.2em;
        }

        /* Style for Hide/Show button */
        .hide-button {
            margin-top: 10px;
            padding: 5px 10px;
            background-color: #ff0000;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .hide-button:hover {
            background-color: #cc0000;
        }
    </style>

<body>
    <div class="matrix">
        <script>
            for (let i = 0; i < 100; i++) {
                const span = document.createElement('span');
                span.textContent = Math.random() > 0.5 ? String.fromCharCode(Math.random() * 128) : '';
                span.style.left = Math.random() * 100 + 'vw';
                span.style.animationDelay = Math.random() * 5 + 's';
                document.querySelector('.matrix').appendChild(span);
                span.style.top = Math.random() * 100 + 'vh';
                span.style.animationDuration = Math.random() * 5 + 3 + 's';
            }
        </script>
    </div>

     <h1>THE DX MEGA MESH</h1>
    <h2>Liam Cottle ‚Äì Live Feed</h2>
    <h3>Created by SubnetConflict.</h3>
    <h3>Nicked by KD.</h3>
    <h1>DO NOT set your node as router unless agreed upon by the mesh!</h1>
    <h3>
        Join the Mesh Hub Midlands Discord. No Kirby bullshit ‚Äî 
        <a href="https://discord.gg/98b377tCBC" target="_blank">https://discord.gg/98b377tCBC</a>
    </h3>
    <h3>
        for configuration help (android) go to ‚Äî 
        <a href="https://www.meshhubmids.com/config.html" target="_blank">https://www.meshhubmids.com/config.html</a>
    </h3>
    <h3>Make sure ‚ÄúOK to MQTT‚Äù is ON, ‚ÄúIgnore MQTT‚Äù is OFF, and ‚ÄúUplink‚Äù is ON to be seen on the nodes.</h3>
    <h3>To have your own node, you need to connect to Liam Cottle‚Äôs MQTT server using these settings:</h3>
    <h3>Address: mqtt.meshtastic.liamcottle.net | Username: uplink | Password: uplink | Encryption Enabled: Yes | JSON Output: No | TLS Enabled: No</h3>
    <h3>A node with Wi-Fi will be needed, or use Proxy-to-Client Enable. A fixed position is recommended.</h3>
    <h3>I (KD) will add your node to the webpage after it shows on Liam Cottle‚Äôs map and after I‚Äôve been told. It may take a while ‚Äì sorry!</h3>
    <h5>Edited: 14/10/25</h5>
    <!-- Slider for iframe height control -->
    <div class="iframe-height-control">
        <label for="iframe-height">Adjust Message Box Height: </label>
        <input type="range" id="iframe-height" name="iframe-height" min="100" max="500" value="300">
        <span id="iframe-height-value">300px</span>
    </div>

    <!-- button for matrix -->
    <div style="margin: 20px;">
    <button id="matrix-toggle" class="hide-button">Toggle Matrix Effect</button>
    </div>

    <!-- colour picker -->
    <div class="font-color-control">
  <label for="font-color">Choose Matrix Color: </label>
  <input type="color" id="font-color" name="font-color" value="#00ff00">
</div>


    <div class="container">
        <div class="iframe-wrapper">
            <p>WORCESTER: 7ACC</p>
            <iframe src="https://meshtastic.liamcottle.net/api/v1/text-messages/embed?gateway_id=3662969548"></iframe>
            <button class="hide-button" onclick="toggleIframeVisibility(this)">Hide</button>
        </div>
        <div class="iframe-wrapper">
            <p>KIDDERMINSTER: KD1 </p>
            <iframe src="https://meshtastic.liamcottle.net/api/v1/text-messages/embed?gateway_id=2956716132"></iframe>
            <button class="hide-button" onclick="toggleIframeVisibility(this)">Hide</button>
        </div>
        <div class="iframe-wrapper">
            <p>BRIDGNORTH: WV16</p>
            <iframe src="https://meshtastic.liamcottle.net/api/v1/text-messages/embed?gateway_id=3952198667"></iframe>
            <button class="hide-button" onclick="toggleIframeVisibility(this)">Hide</button>
        </div>
         <div class="iframe-wrapper">
            <p>NEAR FRANKLEY: JMsh‚Ñ¢‚úî - B31</p>
            <iframe src="https://meshtastic.liamcottle.net/api/v1/text-messages/embed?gateway_id=2997340012"></iframe>
            <button class="hide-button" onclick="toggleIframeVisibility(this)">Hide</button>
        </div>
        <div class="iframe-wrapper">
            <p>NEAR FRANKLEY: ü§ñ MeshHubMids.com‚Ñ¢‚úî üì° - B31</p>
            <iframe src="https://meshtastic.liamcottle.net/api/v1/text-messages/embed?gateway_id=2224784856"></iframe>
            <button class="hide-button" onclick="toggleIframeVisibility(this)">Hide</button>
        </div>
        <div class="iframe-wrapper">
            <p>WORCESTER:Worcester South</p>
            <iframe src="https://meshtastic.liamcottle.net/api/v1/text-messages/embed?gateway_id=1128082424"></iframe>
            <!--https://meshtastic.liamcottle.net/api/v1/text-messages/embed?gateway_id=1128082424-->
             <!--https://meshtastic.liamcottle.net/api/v1/text-messages/embed?gateway_id=1819532184-->
            <button class="hide-button" onclick="toggleIframeVisibility(this)">Hide</button>
        </div>
        <div class="iframe-wrapper">
            <p>TELFORD: WOBBO</p>
            <iframe src=https://meshtastic.liamcottle.net/api/v1/text-messages/embed?gateway_id=3663131456></iframe>
            <button class="hide-button" onclick="toggleIframeVisibility(this)">Hide</button>
        </div>
         <div class="iframe-wrapper">
            <p>NEAR STOURBRIDGE:AMBLECOTE 1</p>
            <iframe src="https://meshtastic.liamcottle.net/api/v1/text-messages/embed?gateway_id=1136043812"></iframe>
            <button class="hide-button" onclick="toggleIframeVisibility(this)">Hide</button>
        </div>
       
<script>
    // Function to toggle iframe visibility
    function toggleIframeVisibility(button) {
        const iframeWrapper = button.parentElement;
        const iframe = iframeWrapper.querySelector('iframe');
        const isHidden = iframe.style.display === 'none';
        iframe.style.display = isHidden ? 'block' : 'none';
        button.textContent = isHidden ? 'Hide' : 'Show';
    }

    // Iframe height control
    const iframeHeightSlider = document.getElementById('iframe-height');
    const iframeHeightValue = document.getElementById('iframe-height-value');

    iframeHeightSlider.addEventListener('input', function() {
        const height = iframeHeightSlider.value;
        iframeHeightValue.textContent = height + 'px';
        document.querySelectorAll('iframe').forEach(iframe => {
            iframe.style.height = height + 'px';
        });
    });

    // Matrix toggle
    const matrixDiv = document.querySelector('.matrix');
    const matrixToggleBtn = document.getElementById('matrix-toggle');
    matrixToggleBtn.addEventListener('click', () => {
        matrixDiv.style.display = matrixDiv.style.display === 'none' ? 'block' : 'none';
    });

    // Font color picker + persistence with unique ID
    const fontColorPicker = document.getElementById('font-color');
    const localStorageKey = 'matrix_dx_color'; // unique ID for this page/site
    const savedColor = localStorage.getItem(localStorageKey);

    // Function to apply a color theme
    function applyColor(chosenColor) {
        document.body.style.color = chosenColor;

        // Helper to darken the color
        function darkenColor(hex, factor = 0.5) {
            let r = parseInt(hex.substr(1, 2), 16);
            let g = parseInt(hex.substr(3, 2), 16);
            let b = parseInt(hex.substr(5, 2), 16);
            r = Math.floor(r * factor);
            g = Math.floor(g * factor);
            b = Math.floor(b * factor);
            return `rgb(${r}, ${g}, ${b})`;
        }

        const darkerBg = darkenColor(chosenColor, 0.2);

        // Update iframe wrappers
        document.querySelectorAll('.iframe-wrapper').forEach(wrapper => {
            wrapper.style.borderColor = chosenColor;
            wrapper.style.boxShadow = `0 4px 8px ${chosenColor}80`;
            wrapper.style.backgroundColor = darkerBg;
        });

        // Update matrix effect color
        document.querySelectorAll('.matrix span').forEach(span => {
            span.style.color = chosenColor;
        });

        // Update picker value
        fontColorPicker.value = chosenColor;
    }

    // Apply saved color if exists
    if (savedColor) {
        applyColor(savedColor);
    }

    // Listen for color picker changes
    fontColorPicker.addEventListener('input', function() {
        const chosenColor = fontColorPicker.value;
        applyColor(chosenColor);
        localStorage.setItem(localStorageKey, chosenColor); // save under unique ID
    });
</script>

</body>

</html>
